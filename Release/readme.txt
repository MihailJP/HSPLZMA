【HSPLZMA】
　これは、HSPの機能を拡張するプラグインです。このプラグインを使うと、標準では
サポートされていないLZMA圧縮されたファイルを解凍したり、逆にファイルやメモリ上
のデータをLZMAで圧縮したりできるようになります。

【動作環境】
　Windows XP/Vista/7、HSP 3.xがインストールされていること。

【インストールのしかた】
　アーカイブの中の、「hsplzma.dll」をHSPの実行ファイルと同じフォルダーに、
「common」「hsphelp」「sample」をそれぞれ対応するフォルダーに、それぞれコピー
してください。
　「hsplzma.dll」、「hsplzma.as」は圧縮機能も搭載した版、「hsplzmax.dll」、
「hsplzmax.as」は、圧縮機能を使わない場合のための伸長専用版です。

【アンインストールのしかた】
　「hsplzma.dll」「hsplzmax.dll」「common\hsplzma.as」「common\hsplzmax.as」
「hsphelp\hsplzma.hs」および「sample\hsplzma」を削除します。

【つかいかた】
　スクリプトの頭に、「#include "hsplzma.as"」という行を書くことで使用できるよ
うになります。伸長専用版の場合は、代わりに「#include "hsplzmax.as"」と書きます。

【命令の説明】

lzmacompress p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11

	p1=変数        : 結果を格納するバッファ
	p2=0〜         : バッファのサイズ
	p3=変数        : 圧縮元のバッファ
	p4=0〜         : 圧縮前のサイズ
	p5=0〜9(-1)    : 圧縮レベル
	p6=22〜52(-1)  : 辞書サイズ
	p7=0〜8(-1)    : リテラルのコンテキストビット数
	p8=0〜4(-1)    : リテラルの位置ビット数
	p9=0〜4(-1)    : 位置ビット数
	p10=5〜273(-1) : ワードサイズ
	p11=1〜2(-1)   : スレッド数

	解説
	
	圧縮したいバッファp3の内容を圧縮し、p1に格納します。
	予めp1には十分な量のバッファを確保し、その大きさをp2に指定してください。
	圧縮元のバッファはp4で指定したサイズだけが読み込まれます。
	なお、あまり大きなファイルを圧縮しようとするとフリーズすることがありますの
	でお気を付けください。

	p5には圧縮レベルを指定します。
	数字が大きいほど圧縮率が良くなりますが、その分圧縮に時間がかかるようになり
	ます。省略するか-1を指定した場合、5とみなされます。

	p6には辞書サイズを指定します。
	省略するか-1を指定した場合、圧縮レベルに応じて自動的に値が指定されます。パ
	ラメータと実際のサイズとの対応は次の通りです。
	------------------------------------------
	    22:   4KiB
	    23:   6KiB  33: 192KiB  43:   6MiB
	    24:   8KiB  34: 256KiB  44:   8MiB
	    25:  12KiB  35: 384KiB  45:  12MiB
	    26:  16KiB  36: 512KiB  46:  16MiB
	    27:  24KiB  37: 768KiB  47:  24MiB
	    28:  32KiB  38:   1MiB  48:  32MiB
	    29:  48KiB  39: 1.5MiB  49:  48MiB
	    30:  64KiB  40:   2MiB  50:  64MiB
	    31:  96KiB  41:   3MiB  51:  96MiB
	    32: 128KiB  42:   4MiB  52: 128MiB
	------------------------------------------

	p7〜p10には細かい挙動のオプションを指定します。
	通常は省略してかまいません。意味については LZMA SDK のソースコードに記載が
	ありますので別途参照してください。

	p11には圧縮処理に使用するスレッド数を指定します。但し圧縮レベルを4未満に指
	定していた場合は、必ず1スレッドで処理されます。
	省略するか-1を指定した場合、2とみなされます。

	成功した場合、statに0が返り、strsizeに圧縮後のサイズが返ります。
	失敗した場合、statに1以上の値が返ります。

lzmadecompress p1, p2, p3, p4

	p1=変数    : 結果を格納するバッファ
	p2=0〜     : バッファのサイズ
	p3=変数    : 展開元のバッファ
	p4=0〜     : 展開前のサイズ

	解説
	
	圧縮されたバッファp3の内容を展開し、p1に格納します。
	予めp1には十分な量のバッファを確保し、その大きさをp2に指定してください。
	展開元のバッファはp4で指定したサイズだけが読み込まれます。
	なお、あまり大きなファイルを展開しようとするとフリーズすることがありますの
	でお気を付けください。

	成功した場合、statに0が返り、strsizeに展開後のサイズが返ります。
	失敗した場合、statに1以上の値が返ります。

【ライセンスについて】
　このソフトウェアはどなたでも無償でご使用いただけますが、著作権を放棄するもの
ではありません。また、このDLLを使用した結果生じた一切の事象に関して、作者は責
任を負いませんので、ご理解の上ご利用ください。

　なお、DLLの作成にあたりベースとしたLZMA SDKのライセンスは以下の通りです。
----------------------------------(キリトリ)----------------------------------
LZMA SDK is written and placed in the public domain by Igor Pavlov.
----------------------------------(キリトリ)----------------------------------

【そのほか】
　試しにMinGWでもビルドできるようにMakefileをつくってみたんですが、なんかデカ
イ……
　そんなMakefileを含めたソースコード一式はGitHubのリポジトリに置いてあります。
　https://github.com/MihailJP/HSPLZMA

【何かあったら】
　HSPLZMAに関して万一バグがあったりした場合は、次の連絡先にどうぞ。
・メール： mihailjp@gmail.com
・Twitter： @MihailJP
　なお、HSPLZMA固有の問題についてIgor Pavlov氏に質問するのはおやめください。

【バージョン履歴】
[0.3] 2012年1月22日
　LZMAストリームにファイルサイズを保存するようにする。
　(Linuxのlzmaコマンドなどでも正常に読み込めるようになりました)

[0.2] 2011年9月16日
　msvcr100.dllに依存していた問題を解消。
　サンプルスクリプトを用意。
　LZMA形式の入出力をコマンドラインのlzma互換にする。
　.hs形式のヘルプを用意。

[0.1] 2011年2月20日
　LZMA SDK version 9.20を元に作成。
